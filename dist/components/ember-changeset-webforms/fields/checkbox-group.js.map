{"version":3,"file":"checkbox-group.js","sources":["../../../../src/components/ember-changeset-webforms/fields/checkbox-group.js"],"sourcesContent":["import { action } from '@ember/object';\nimport Component from '@glimmer/component';\nimport { tracked } from '@glimmer/tracking';\n\nexport default class CheckboxGroup extends Component {\n  @tracked value;\n\n  get options() {\n    var checkedItems = this.stringToArray(this.args.formField.fieldValue);\n    var options = this.args.formField.options;\n    options.forEach(function (option) {\n      if (checkedItems.indexOf(option.key) > -1) {\n        option.value = true;\n      } else {\n        option.value = false;\n      }\n    });\n    options.forEach((option) => (option.onlyCheckedOption = false));\n    checkedItems = checkedItems || [];\n    if (checkedItems.length === 1) {\n      const checkedOption = options.findBy('key', checkedItems[0]);\n      checkedOption.onlyCheckedOption = true;\n    }\n    return options;\n  }\n\n  @action\n  checkboxToggled(option, value, event) {\n    var checkedItems = this.stringToArray(this.args.formField.fieldValue);\n    if (value === true) {\n      checkedItems = checkedItems.concat([option.key]); // TODO can pushObject work with tracked props?\n      option.checked = true;\n    } else {\n      checkedItems = checkedItems.filter((item) => {\n        return item != option.key;\n      });\n      option.checked = false;\n    }\n    if (checkedItems.length === 0) {\n      checkedItems = null;\n    } else {\n      checkedItems = checkedItems.sort();\n    }\n    this.args.updateFieldValue(checkedItems);\n    this.args.onUserInteraction('checkboxToggled', checkedItems, event);\n  }\n\n  stringToArray(value) {\n    var array;\n    if (typeof value === 'string') {\n      array = value.split(',');\n    } else {\n      array = value || [];\n    }\n    array = array.map((item) => {\n      return item.trim();\n    });\n    return array;\n  }\n}\n"],"names":["CheckboxGroup","Component","g","prototype","tracked","i","void 0","options","checkedItems","stringToArray","args","formField","fieldValue","forEach","option","indexOf","key","value","onlyCheckedOption","length","checkedOption","findBy","checkboxToggled","event","concat","checked","filter","item","sort","updateFieldValue","onUserInteraction","n","action","array","split","map","trim","setComponentTemplate","TEMPLATE"],"mappings":"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"}