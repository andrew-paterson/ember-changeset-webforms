{"version":3,"file":"changeset-webform.js","sources":["../../src/components/changeset-webform.js"],"sourcesContent":["import { action } from '@ember/object';\nimport Component from '@glimmer/component';\nimport validateFields from '../utils/validate-fields.js';\nimport nullifyExcludedFields from '../utils/nullify-excluded-fields.js';\nimport createChangesetWebform from '../utils/create-changeset-webform.js';\nimport isPromise from '../utils/is-promise.js';\nimport { tracked } from '@glimmer/tracking';\nimport { inject as service } from '@ember/service';\nexport default class ChangesetWebform extends Component {\n  @service emberChangesetWebforms;\n  @tracked changesetWebform;\n\n  get formSettings() {\n    if (!this.changesetWebform) {\n      return null;\n    }\n    return this.changesetWebform.formSettings;\n  }\n\n  get formFields() {\n    if (!this.formObject) {\n      return null;\n    }\n    return this.formObject.formFields;\n  }\n\n  get needsValidation() {\n    var formFields = this.formFields || [];\n    return formFields.find((field) => {\n      field.validationRules = field.validationRules || [];\n      return field.validationRules.length > 0;\n    });\n  }\n\n  get changeset() {\n    return (this.changesetWebform || {}).changeset;\n  }\n\n  get formValidationClass() {\n    if (!this.changeset) {\n      return null;\n    }\n    if (this.changeset.get('isInvalid')) {\n      return 'validation-failed';\n    }\n    if (this.changeset.get('isValid')) {\n      return 'validation-passed';\n    }\n    return null;\n  }\n\n  @action\n  didInsert() {\n    this.generateChangesetWebform(\n      this.args.formSchema,\n      this.args.data,\n      this.args.customValidators,\n    );\n  }\n\n  @action\n  generateChangesetWebform(formSchema, data, customValidators, opts) {\n    this.changesetWebform = createChangesetWebform(\n      this.emberChangesetWebforms.changesetWebformsDefaults,\n      formSchema,\n      data,\n      customValidators,\n      opts,\n    );\n    if (this.args.afterGenerateChangesetWebform) {\n      this.args.afterGenerateChangesetWebform(this.changesetWebform);\n    }\n  }\n\n  @action\n  onFieldValueChangeAction(formField, changeset, snapshot) {\n    if (this.args.onFieldValueChange) {\n      this.args.onFieldValueChange(formField, this.changesetWebform, snapshot);\n    }\n  }\n\n  @action\n  onFieldInsertedAction(formField) {\n    if (this.args.onFieldInserted) {\n      this.args.onFieldInserted(formField, this.changesetWebform);\n    }\n  }\n\n  @action\n  afterFieldValidationAction(formField, _changeset, fieldValidationErrors) {\n    if (this.args.afterFieldValidation) {\n      this.args.afterFieldValidation(\n        formField,\n        this.changesetWebform,\n        fieldValidationErrors,\n      );\n    }\n  }\n\n  @action\n  onUserInteraction(formField, eventName, value, event) {\n    if (this.args.onUserInteraction) {\n      this.args.onUserInteraction(\n        formField,\n        this.changesetWebform,\n        eventName,\n        value,\n        event,\n      );\n    }\n  }\n  //  TODO allow action to completely replace this action\n  @action\n  submitForm(changesetWebform) {\n    const changeset = changesetWebform.changeset;\n    validateFields(changesetWebform)\n      .then((validationResult) => {\n        if (this.args.afterValidateFields) {\n          this.args.afterValidateFields(changesetWebform, validationResult);\n        }\n        if (changeset.isValid) {\n          if (this.args.formValidationPassed) {\n            this.args.formValidationPassed(changesetWebform);\n          }\n          try {\n            if (this.args.beforeSubmitAction) {\n              this.args.beforeSubmitAction(changesetWebform); // TODO how to make this await or not.\n            }\n          } catch (err) {\n            console.log(err);\n          }\n          try {\n            nullifyExcludedFields(changesetWebform); // TODO test this\n          } catch (err) {\n            console.log(err);\n          }\n          changesetWebform.formSettings.requestInFlight = true;\n          if (this.args.submitAction) {\n            changeset\n              .save()\n              .then((savedChangeset) => {\n                try {\n                  var submitAction = this.args.submitAction(\n                    savedChangeset.data,\n                    changesetWebform,\n                  );\n                  if (isPromise(submitAction)) {\n                    submitAction\n                      .then((submitActionResponse) => {\n                        changesetWebform.formSettings.requestInFlight = false;\n                        if (this.args.submitSuccess) {\n                          this.args.submitSuccess(\n                            submitActionResponse,\n                            changesetWebform,\n                          );\n                        }\n                        if (\n                          changesetWebform.formSettings.clearFormAfterSubmit\n                        ) {\n                          this.clearForm(changesetWebform);\n                        }\n                      })\n                      .catch((error) => {\n                        changesetWebform.formSettings.requestInFlight = false;\n                        if (this.args.submitError) {\n                          this.args.submitError(error, changesetWebform);\n                        }\n                      });\n                  } else {\n                    changesetWebform.formSettings.requestInFlight = false;\n                    var submitActionResponse = submitAction;\n                    if (this.args.submitSuccess) {\n                      this.args.submitSuccess(\n                        submitActionResponse,\n                        changesetWebform,\n                      );\n                    }\n                    if (changesetWebform.formSettings.clearFormAfterSubmit) {\n                      this.clearForm(changesetWebform);\n                    }\n                  }\n                } catch (error) {\n                  changesetWebform.formSettings.requestInFlight = false;\n                  if (this.args.submitError) {\n                    this.args.submitError(error, changesetWebform);\n                  }\n                }\n              })\n              .catch((err) => {\n                changesetWebform.formSettings.requestInFlight = false;\n                if (this.args.submitError) {\n                  this.args.submitError(err, changesetWebform);\n                }\n              });\n          } else {\n            changeset\n              .save()\n              .then((saveChangesetResponse) => {\n                changesetWebform.formSettings.requestInFlight = false;\n                if (this.args.submitSuccess) {\n                  this.args.submitSuccess(\n                    saveChangesetResponse,\n                    changesetWebform,\n                  );\n                }\n                if (changesetWebform.formSettings.clearFormAfterSubmit) {\n                  this.clearForm(changesetWebform);\n                }\n              })\n              .catch((error) => {\n                if (this.args.submitError) {\n                  this.args.submitError(error, changesetWebform);\n                }\n                changesetWebform.formSettings.requestInFlight = false;\n              });\n          }\n        } else {\n          if (this.args.formValidationFailed) {\n            this.args.formValidationFailed(changesetWebform);\n          }\n        }\n      })\n      .catch((err) => {\n        changesetWebform.formSettings.requestInFlight = false;\n        if (this.args.formValidationFailed) {\n          this.args.formValidationFailed(changesetWebform, err);\n        }\n      });\n  }\n\n  @action\n  discardChanges(changesetWebform) {\n    changesetWebform.changeset.rollback();\n  }\n\n  @action\n  clearForm(changesetWebform) {\n    // TODO test for this\n    const opts = {\n      suppressDefaults:\n        changesetWebform.formSettings.clearFormAfterSubmit ===\n        'suppressDefaultValues',\n    };\n    if (this.args.beforeReset) {\n      this.args.beforeReset(changesetWebform);\n    }\n    this.generateChangesetWebform(\n      this.args.formSchema,\n      null,\n      this.args.customValidators,\n      opts,\n    );\n    if (changesetWebform.formSettings.submitAfterClear) {\n      this.submitForm(this.changesetWebform);\n    }\n  }\n}\n"],"names":["ChangesetWebform","Component","g","prototype","service","i","void 0","tracked","formSettings","changesetWebform","formFields","formObject","needsValidation","find","field","validationRules","length","changeset","formValidationClass","get","didInsert","generateChangesetWebform","args","formSchema","data","customValidators","n","action","opts","createChangesetWebform","emberChangesetWebforms","changesetWebformsDefaults","afterGenerateChangesetWebform","onFieldValueChangeAction","formField","snapshot","onFieldValueChange","onFieldInsertedAction","onFieldInserted","afterFieldValidationAction","_changeset","fieldValidationErrors","afterFieldValidation","onUserInteraction","eventName","value","event","submitForm","validateFields","then","validationResult","afterValidateFields","isValid","formValidationPassed","beforeSubmitAction","err","console","log","nullifyExcludedFields","requestInFlight","submitAction","save","savedChangeset","isPromise","submitActionResponse","submitSuccess","clearFormAfterSubmit","clearForm","catch","error","submitError","saveChangesetResponse","formValidationFailed","discardChanges","rollback","suppressDefaults","beforeReset","submitAfterClear","setComponentTemplate","TEMPLATE"],"mappings":"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"}