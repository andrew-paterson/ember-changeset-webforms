{"version":3,"file":"create-validations.js","sources":["../../src/utils/create-validations.js"],"sourcesContent":["// import defaultValidators from 'ember-changeset-validations/validators';\nimport clonedValidator from '../validators/cloned';\nimport uniqueCloneValidator from '../validators/unique-clone';\nimport { unflatten } from 'flat';\n\nimport {\n  validateDate,\n  validatePresence,\n  validateLength,\n  validateNumber,\n  validateFormat,\n  validateInclusion,\n  validateExclusion,\n  validateConfirmation,\n} from 'ember-changeset-validations/validators';\n\nconst defaultValidators = {\n  validateDate,\n  validatePresence,\n  validateLength,\n  validateNumber,\n  validateFormat,\n  validateInclusion,\n  validateExclusion,\n  validateConfirmation,\n};\n\nexport default function createValidations(fields, customValidators = {}) {\n  defaultValidators.validateClone = clonedValidator;\n  defaultValidators.uniqueClone = uniqueCloneValidator;\n  var validations = {};\n  if (!fields) {\n    return validations;\n  }\n  fields.forEach((field) => {\n    field.propertyName = field.propertyName || field.fieldId;\n    if (!field.validationRules) {\n      return;\n    }\n\n    var fieldValidations = [];\n    field.validationRules.forEach((rule) => {\n      var validator =\n        customValidators[rule.validationMethod] ||\n        defaultValidators[rule.validationMethod];\n      if (!validator) {\n        return;\n      }\n      fieldValidations.push(validator(rule.arguments));\n    });\n    validations[field.propertyName] = fieldValidations;\n  });\n  return unflatten(validations);\n}\n"],"names":["defaultValidators","validateDate","validatePresence","validateLength","validateNumber","validateFormat","validateInclusion","validateExclusion","validateConfirmation","createValidations","fields","customValidators","validateClone","clonedValidator","uniqueClone","uniqueCloneValidator","validations","forEach","field","propertyName","fieldId","validationRules","fieldValidations","rule","validator","validationMethod","push","arguments","unflatten"],"mappings":";;;;;AAAA;AAgBA,MAAMA,iBAAiB,GAAG;EACxBC,YAAY;EACZC,gBAAgB;EAChBC,cAAc;EACdC,cAAc;EACdC,cAAc;EACdC,iBAAiB;EACjBC,iBAAiB;AACjBC,EAAAA;AACF,CAAC;AAEc,SAASC,iBAAiBA,CAACC,MAAM,EAAEC,gBAAgB,GAAG,EAAE,EAAE;EACvEX,iBAAiB,CAACY,aAAa,GAAGC,aAAe;EACjDb,iBAAiB,CAACc,WAAW,GAAGC,mBAAoB;EACpD,IAAIC,WAAW,GAAG,EAAE;EACpB,IAAI,CAACN,MAAM,EAAE;AACX,IAAA,OAAOM,WAAW;AACpB;AACAN,EAAAA,MAAM,CAACO,OAAO,CAAEC,KAAK,IAAK;IACxBA,KAAK,CAACC,YAAY,GAAGD,KAAK,CAACC,YAAY,IAAID,KAAK,CAACE,OAAO;AACxD,IAAA,IAAI,CAACF,KAAK,CAACG,eAAe,EAAE;AAC1B,MAAA;AACF;IAEA,IAAIC,gBAAgB,GAAG,EAAE;AACzBJ,IAAAA,KAAK,CAACG,eAAe,CAACJ,OAAO,CAAEM,IAAI,IAAK;AACtC,MAAA,IAAIC,SAAS,GACXb,gBAAgB,CAACY,IAAI,CAACE,gBAAgB,CAAC,IACvCzB,iBAAiB,CAACuB,IAAI,CAACE,gBAAgB,CAAC;MAC1C,IAAI,CAACD,SAAS,EAAE;AACd,QAAA;AACF;MACAF,gBAAgB,CAACI,IAAI,CAACF,SAAS,CAACD,IAAI,CAACI,SAAS,CAAC,CAAC;AAClD,KAAC,CAAC;AACFX,IAAAA,WAAW,CAACE,KAAK,CAACC,YAAY,CAAC,GAAGG,gBAAgB;AACpD,GAAC,CAAC;EACF,OAAOM,SAAS,CAACZ,WAAW,CAAC;AAC/B;;;;"}