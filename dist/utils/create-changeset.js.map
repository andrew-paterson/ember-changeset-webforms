{"version":3,"file":"create-changeset.js","sources":["../../src/utils/create-changeset.js"],"sourcesContent":["import { Changeset } from 'ember-changeset';\nimport lookupValidator from 'ember-changeset-validations';\nimport createValidations from './create-validations';\n\nexport default function createChangeset(\n  formFields,\n  data,\n  customValidators,\n  opts = {},\n) {\n  data = data || {};\n  var validationsMap = createValidations(formFields, customValidators);\n  var changeset = Changeset(\n    data,\n    lookupValidator(validationsMap),\n    validationsMap,\n    { skipValidate: true },\n  );\n\n  formFields.forEach((formField) => {\n    formField.propertyName = formField.propertyName || formField.fieldId;\n    if (changeset.get(formField.propertyName) !== undefined) {\n      return;\n    }\n    if (\n      Object.prototype.hasOwnProperty.call(formField, 'defaultValue') &&\n      !opts.suppressDefaults\n    ) {\n      changeset.set(formField.propertyName, formField.defaultValue);\n    }\n  });\n  return changeset;\n}\n"],"names":["createChangeset","formFields","data","customValidators","opts","validationsMap","createValidations","changeset","Changeset","lookupValidator","skipValidate","forEach","formField","propertyName","fieldId","get","undefined","Object","prototype","hasOwnProperty","call","suppressDefaults","set","defaultValue"],"mappings":";;;;AAIe,SAASA,eAAeA,CACrCC,UAAU,EACVC,IAAI,EACJC,gBAAgB,EAChBC,IAAI,GAAG,EAAE,EACT;AACAF,EAAAA,IAAI,GAAGA,IAAI,IAAI,EAAE;AACjB,EAAA,IAAIG,cAAc,GAAGC,iBAAiB,CAACL,UAAU,EAAEE,gBAAgB,CAAC;AACpE,EAAA,IAAII,SAAS,GAAGC,SAAS,CACvBN,IAAI,EACJO,eAAe,CAACJ,cAAc,CAAC,EAC/BA,cAAc,EACd;AAAEK,IAAAA,YAAY,EAAE;AAAK,GACvB,CAAC;AAEDT,EAAAA,UAAU,CAACU,OAAO,CAAEC,SAAS,IAAK;IAChCA,SAAS,CAACC,YAAY,GAAGD,SAAS,CAACC,YAAY,IAAID,SAAS,CAACE,OAAO;IACpE,IAAIP,SAAS,CAACQ,GAAG,CAACH,SAAS,CAACC,YAAY,CAAC,KAAKG,SAAS,EAAE;AACvD,MAAA;AACF;AACA,IAAA,IACEC,MAAM,CAACC,SAAS,CAACC,cAAc,CAACC,IAAI,CAACR,SAAS,EAAE,cAAc,CAAC,IAC/D,CAACR,IAAI,CAACiB,gBAAgB,EACtB;MACAd,SAAS,CAACe,GAAG,CAACV,SAAS,CAACC,YAAY,EAAED,SAAS,CAACW,YAAY,CAAC;AAC/D;AACF,GAAC,CAAC;AACF,EAAA,OAAOhB,SAAS;AAClB;;;;"}