{"version":3,"file":"validate-fields.js","sources":["../../src/utils/validate-fields.js"],"sourcesContent":["export default function validateAllowedFields(changesetWebform) {\n  var allowedFields = changesetWebform.fields\n    .filter((field) => {\n      return (\n        !field.hidden &&\n        !field.dynamicallyExcluded &&\n        !field.skipValidation &&\n        field.validates\n      );\n    })\n    .map((allowedField) => {\n      allowedField.eventLog.push('submit');\n      if (allowedField.clonedFields) {\n        // TODO does this really belong in a util.\n        allowedField.clonedFields.forEach((clonedField, index) => {\n          if (\n            clonedField.validationRules &&\n            clonedField.validationRules.length\n          ) {\n            // TODO DRY this up\n            clonedField.validationRules[0].activateValidation =\n              clonedField.validationRules[0].activateValidation || [];\n            clonedField.validationRules[0].activateValidation.push(index);\n          }\n          clonedField.eventLog.push('submit');\n        });\n        // TODO test for cloned fields without any validation rules\n      }\n      return allowedField.propertyName;\n    });\n  var validatePromises = allowedFields.map((allowedField) => {\n    return changesetWebform.changeset.validate(allowedField);\n  });\n  return Promise.all(validatePromises);\n}\n"],"names":["validateAllowedFields","changesetWebform","allowedFields","fields","filter","field","hidden","dynamicallyExcluded","skipValidation","validates","map","allowedField","eventLog","push","clonedFields","forEach","clonedField","index","validationRules","length","activateValidation","propertyName","validatePromises","changeset","validate","Promise","all"],"mappings":"AAAe,SAASA,qBAAqBA,CAACC,gBAAgB,EAAE;EAC9D,IAAIC,aAAa,GAAGD,gBAAgB,CAACE,MAAM,CACxCC,MAAM,CAAEC,KAAK,IAAK;AACjB,IAAA,OACE,CAACA,KAAK,CAACC,MAAM,IACb,CAACD,KAAK,CAACE,mBAAmB,IAC1B,CAACF,KAAK,CAACG,cAAc,IACrBH,KAAK,CAACI,SAAS;AAEnB,GAAC,CAAC,CACDC,GAAG,CAAEC,YAAY,IAAK;AACrBA,IAAAA,YAAY,CAACC,QAAQ,CAACC,IAAI,CAAC,QAAQ,CAAC;IACpC,IAAIF,YAAY,CAACG,YAAY,EAAE;AAC7B;MACAH,YAAY,CAACG,YAAY,CAACC,OAAO,CAAC,CAACC,WAAW,EAAEC,KAAK,KAAK;QACxD,IACED,WAAW,CAACE,eAAe,IAC3BF,WAAW,CAACE,eAAe,CAACC,MAAM,EAClC;AACA;AACAH,UAAAA,WAAW,CAACE,eAAe,CAAC,CAAC,CAAC,CAACE,kBAAkB,GAC/CJ,WAAW,CAACE,eAAe,CAAC,CAAC,CAAC,CAACE,kBAAkB,IAAI,EAAE;UACzDJ,WAAW,CAACE,eAAe,CAAC,CAAC,CAAC,CAACE,kBAAkB,CAACP,IAAI,CAACI,KAAK,CAAC;AAC/D;AACAD,QAAAA,WAAW,CAACJ,QAAQ,CAACC,IAAI,CAAC,QAAQ,CAAC;AACrC,OAAC,CAAC;AACF;AACF;IACA,OAAOF,YAAY,CAACU,YAAY;AAClC,GAAC,CAAC;AACJ,EAAA,IAAIC,gBAAgB,GAAGpB,aAAa,CAACQ,GAAG,CAAEC,YAAY,IAAK;AACzD,IAAA,OAAOV,gBAAgB,CAACsB,SAAS,CAACC,QAAQ,CAACb,YAAY,CAAC;AAC1D,GAAC,CAAC;AACF,EAAA,OAAOc,OAAO,CAACC,GAAG,CAACJ,gBAAgB,CAAC;AACtC;;;;"}