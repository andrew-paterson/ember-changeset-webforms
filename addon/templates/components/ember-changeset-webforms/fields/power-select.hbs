<div data-test-type="form-field-power-select">
  <PowerSelect 
    @triggerClass="validation-area {{formField.validationAreaClassNames}}" 
    @options={{formField.options}} 
    @selected={{changeset-get changesetProp formField.propertyName}} 
    @searchPlaceholder={{or formField.searchPlaceholder "Search"}} 
    @searchField={{formField.optionDisplayProp}} 
    @allowClear={{allowClear}} 
    @searchEnabled={{formField.searchEnabled}} 
    @placeholder={{formField.placeholder}} 
    @onChange={{action "onOptionChanged" formField}} 
    @onclose={{onclose}} 
    @triggerId={{formField.name}} 
    @disabled={{formField.disabled}} 
    @selectedItemComponent={{component formField.selectedItemComponent}} as |option|>
    {{#if formField.optionComponent}}
      {{#if optionComponent.path}}
        {{component optionComponent.path props=optionComponent.props}}
      {{else}}
        {{component formField.optionComponent option=option}}
      {{/if}}
    {{else}}
      <Background::PowerSelectOption 
        @option={{option}} 
        @optionDisplayProp={{formField.optionDisplayProp}} 
        @fieldId={{formField.fieldId}} 
        @optionName={{if formField.optionDisplayProp (get option formField.optionDisplayProp) option}}
      />
    {{/if}}
  </PowerSelect>
</div>


{{#if labelComponent}}
    {{#if labelComponent.path}}
      {{component labelComponent.path props=labelComponent.props}}
    {{else}}
      {{component labelComponent}}
    {{/if}}
  {{else if label}}
    {{label}}
  {{/if}}